@tailwind base;
@tailwind components;
@tailwind utilities;

/* REGRAS CRÍTICAS: Forçar tema antes de qualquer coisa carregar */
/* Essas regras têm máxima prioridade e sobrescrevem qualquer preferência do sistema */
html {
  color-scheme: light !important;
}

html.dark {
  color-scheme: dark !important;
}

@layer base {
  :root {
    --radius: 0.65rem;
    --background: oklch(1 0 0);
    --foreground: oklch(0.141 0.005 285.823);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.141 0.005 285.823);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.141 0.005 285.823);
    --primary: oklch(0.488 0.243 264.376);
    --primary-foreground: oklch(0.97 0.014 254.604);
    --secondary: oklch(0.967 0.001 286.375);
    --secondary-foreground: oklch(0.21 0.006 285.885);
    --muted: oklch(0.967 0.001 286.375);
    --muted-foreground: oklch(0.552 0.016 285.938);
    --accent: oklch(0.967 0.001 286.375);
    --accent-foreground: oklch(0.21 0.006 285.885);
    --destructive: oklch(0.577 0.245 27.325);
    --border: oklch(0.92 0.004 286.32);
    --input: oklch(0.92 0.004 286.32);
    --ring: oklch(0.708 0 0);
    --chart-1: oklch(0.809 0.105 251.813);
    --chart-2: oklch(0.623 0.214 259.815);
    --chart-3: oklch(0.546 0.245 262.881);
    --chart-4: oklch(0.488 0.243 264.376);
    --chart-5: oklch(0.424 0.199 265.638);
    --sidebar: oklch(0.985 0 0);
    --sidebar-background: oklch(0.984 0.003 247.858);
    --sidebar-foreground: oklch(0.141 0.005 285.823);
    --sidebar-primary: oklch(0.546 0.245 262.881);
    --sidebar-primary-foreground: oklch(0.97 0.014 254.604);
    --sidebar-accent: oklch(0.967 0.001 286.375);
    --sidebar-accent-foreground: oklch(0.21 0.006 285.885);
    --sidebar-border: oklch(0.92 0.004 286.32);
    --sidebar-ring: oklch(0.708 0 0);
  }

  .dark {
    --background: oklch(0.141 0.005 285.823);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.21 0.006 285.885);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.21 0.006 285.885);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.488 0.243 264.376);
    --primary-foreground: oklch(0.97 0.014 254.604);
    --secondary: oklch(0.274 0.006 286.033);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.274 0.006 286.033);
    --muted-foreground: oklch(0.705 0.015 286.067);
    --accent: oklch(0.274 0.006 286.033);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.704 0.191 22.216);
    --border: oklch(1 0 0 / 10%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.556 0 0);
    --chart-1: oklch(0.809 0.105 251.813);
    --chart-2: oklch(0.623 0.214 259.815);
    --chart-3: oklch(0.546 0.245 262.881);
    --chart-4: oklch(0.488 0.243 264.376);
    --chart-5: oklch(0.424 0.199 265.638);
    --sidebar: oklch(0.21 0.006 285.885);
    --sidebar-background: oklch(0.208 0.042 265.755);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.623 0.214 259.815);
    --sidebar-primary-foreground: oklch(0.97 0.014 254.604);
    --sidebar-accent: oklch(0.274 0.006 286.033);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(1 0 0 / 10%);
    --sidebar-ring: oklch(0.439 0 0);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  /* Forçar color-scheme baseado APENAS na classe .dark, IGNORAR completamente prefers-color-scheme */
  /* Usar !important para sobrescrever qualquer CSS do navegador ou preferência do sistema */
  html {
    color-scheme: light !important;
    /* Forçar background e foreground para evitar que o navegador aplique cores do sistema */
    background-color: var(--background) !important;
    color: var(--foreground) !important;
  }
  html.dark {
    color-scheme: dark !important;
    background-color: var(--background) !important;
    color: var(--foreground) !important;
  }
  html.light {
    color-scheme: light !important;
    background-color: var(--background) !important;
    color: var(--foreground) !important;
  }
  
  /* Garantir que body também use as cores corretas, ignorando preferência do sistema */
  body {
    @apply bg-background text-foreground;
    transition: background-color 0.3s ease, color 0.3s ease;
    background-color: var(--background) !important;
    color: var(--foreground) !important;
  }
  
  /* Garantir que html sem classe também seja light */
  html:not(.dark):not(.light) {
    color-scheme: light !important;
    background-color: var(--background) !important;
    color: var(--foreground) !important;
  }
  
  /* Regras para SOBRESCREVER qualquer prefers-color-scheme do sistema */
  /* Essas regras garantem que a classe .dark/.light sempre tenha prioridade */
  @media (prefers-color-scheme: dark) {
    /* Mesmo que o sistema prefira dark, se html não tiver .dark, usar light */
    html:not(.dark) {
      color-scheme: light !important;
      background-color: var(--background) !important;
      color: var(--foreground) !important;
    }
    /* Se html tiver .dark, usar dark (mesmo que sistema prefira dark) */
    html.dark {
      color-scheme: dark !important;
      background-color: var(--background) !important;
      color: var(--foreground) !important;
    }
  }
  
  @media (prefers-color-scheme: light) {
    /* Mesmo que o sistema prefira light, se html tiver .dark, usar dark */
    html.dark {
      color-scheme: dark !important;
      background-color: var(--background) !important;
      color: var(--foreground) !important;
    }
    /* Se html não tiver .dark, usar light */
    html:not(.dark) {
      color-scheme: light !important;
      background-color: var(--background) !important;
      color: var(--foreground) !important;
    }
  }
  /* Sobrescrever qualquer media query do navegador */
  html[style*="color-scheme"] {
    /* Manter o que foi definido via JavaScript */
  }

  body {
    @apply bg-background text-foreground;
    transition: background-color 0.3s ease, color 0.3s ease;
    /* Forçar color-scheme no body também */
    color-scheme: inherit !important;
  }
  
  /* Garantir que body herde do html */
  html.dark body {
    color-scheme: dark !important;
  }
  html.light body {
    color-scheme: light !important;
  }
  html:not(.dark) body {
    color-scheme: light !important;
  }

  /* Forçar background opaco na sidebar mobile */
  [data-mobile="true"][data-sidebar="sidebar"] {
    background-color: var(--sidebar) !important;
    background: var(--sidebar) !important;
    opacity: 1 !important;
  }

  [data-mobile="true"][data-sidebar="sidebar"] > div {
    background-color: var(--sidebar) !important;
    background: var(--sidebar) !important;
    opacity: 1 !important;
  }

  [data-mobile="true"][data-sidebar="sidebar"] > div > div {
    background-color: var(--sidebar) !important;
    background: var(--sidebar) !important;
    opacity: 1 !important;
  }

  /* Garantir que a sidebar desktop também use a cor azul */
  [data-sidebar="sidebar"] {
    background-color: var(--sidebar) !important;
    background: var(--sidebar) !important;
  }

  /* Estilização customizada para cards de clientes no mobile */
  /* Tema claro - cores alternadas */
  .client-card-odd {
    background-color: var(--card) !important;
    border-color: var(--border) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08) !important;
    border-radius: 1rem !important;
  }

  .client-card-even {
    background-color: var(--muted) !important;
    border-color: var(--border) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08) !important;
    border-radius: 1rem !important;
  }

  /* Tema escuro - cores alternadas com efeito glass */
  .dark .client-card-odd {
    background-color: oklch(0.21 0.006 285.885 / 0.8) !important;
    border: 1px solid oklch(0.21 0.006 285.885 / 0.5) !important;
    border-radius: 1rem !important;
  }

  .dark .client-card-even {
    background-color: oklch(0.141 0.005 285.823 / 0.65) !important;
    border: none !important;
    border-radius: 1rem !important;
  }

  /* Estilização para cards do dashboard */
  .dashboard-card {
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.15) !important;
    background-color: oklch(1 0 0 / 0.7) !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    border-radius: 1rem !important;
  }

  .dark .dashboard-card {
    background-color: oklch(0.141 0.005 285.823 / 0.7) !important;
    border: 1px solid rgba(255, 255, 255, 0.05) !important;
  }

  /* Estilização para cards de servidores no mobile */
  .server-card-odd {
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.15) !important;
    background-color: oklch(1 0 0 / 0.7) !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    border-radius: 1rem !important;
  }

  .dark .server-card-odd {
    background-color: oklch(0.21 0.006 285.885 / 0.8) !important;
    border: 1px solid oklch(0.21 0.006 285.885 / 0.5) !important;
  }

  .server-card-even {
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.15) !important;
    background-color: oklch(1 0 0 / 0.7) !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    border-radius: 1rem !important;
  }

  .dark .server-card-even {
    background-color: oklch(0.141 0.005 285.823 / 0.65) !important;
    border: none !important;
  }

  /* Estilização para tabela desktop - cores alternadas */
  .table-desktop thead tr {
    background-color: var(--muted) !important;
  }

  .dark .table-desktop thead tr {
    background-color: oklch(0.274 0.006 286.033 / 0.4) !important;
  }

  .table-desktop tbody tr:nth-child(even) {
    background-color: var(--muted) !important;
  }

  .dark .table-desktop tbody tr:nth-child(even) {
    background-color: oklch(0.274 0.006 286.033 / 0.15) !important;
  }

  .table-desktop tbody tr:nth-child(odd) {
    background-color: transparent !important;
  }

  .dark .table-desktop tbody tr:nth-child(odd) {
    background-color: transparent !important;
  }

  .table-desktop thead tr {
    overflow: hidden !important;
  }

  .table-desktop thead tr th:first-child {
    border-top-left-radius: 1rem !important;
  }

  .table-desktop thead tr th:last-child {
    border-top-right-radius: 1rem !important;
  }

  .table-desktop tbody tr:nth-child(odd) {
    overflow: hidden !important;
  }

  .table-desktop tbody tr:nth-child(odd) td:first-child {
    border-top-left-radius: 1rem !important;
    border-bottom-left-radius: 1rem !important;
  }

  .table-desktop tbody tr:nth-child(odd) td:last-child {
    border-top-right-radius: 1rem !important;
    border-bottom-right-radius: 1rem !important;
  }
}
